{"changed":true,"filter":false,"title":"app.js","tooltip":"/app.js","value":"var     express     = require(\"express\"),\n        app         = express(),\n        bodyParser  = require(\"body-parser\"),\n        mongoose    = require(\"mongoose\"),\n        Post        = require(\"./models/post\"),\n        User        = require(\"./models/user\"),\n        Comment     = require(\"./models/comment\"),\n        flash       = require(\"connect-flash\"),\n        passport    = require(\"passport\"),\n        LocalStrategy = require(\"passport-local\"),\n        methodOverride = require(\"method-override\"),\n        expressSession = require(\"express-session\");\n\n        \n//requiring routes\nvar     indexRoutes      = require(\"./routes/index\"),\n        postRoutes          = require(\"./routes/posts\"),\n        commentRoutes       = require(\"./routes/comments\");\n    \n    \n//connect to DB   \nmongoose.connect(\"mongodb://localhost/tutor_exchange\");\n\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(express.static(\"public\"));\napp.set(\"view engine\", \"ejs\");\napp.use(methodOverride(\"_method\"));\napp.use(flash());\napp.use(express.static(\"image\"));\n\n//Passport confifuaration \napp.use(expressSession({\n    secret: \"You will nerver know our secret1\",\n    resave: true,\n    saveUninitialized: true\n}));\n\n\n\napp.use(passport.initialize());\napp.use(passport.session());\npassport.use(new LocalStrategy(User.authenticate()));\npassport.serializeUser(User.serializeUser());\npassport.deserializeUser(User.deserializeUser());\n\napp.use(function(req, res, next){\n    res.locals.currentUser = req.user;\n    res.locals.error    = req.flash(\"error\");\n    res.locals.success =req.flash(\"success\");\n    next();\n    \n});\n\napp.use(indexRoutes);\napp.use(postRoutes);\napp.use(commentRoutes);\n\napp.listen(process.env.PORT, process.env.IP, function(){\n    console.log(\"The Tutor Exchange server has started!\");\n})","undoManager":{"mark":-2,"position":-1,"stack":[]},"ace":{"folds":[],"customSyntax":"json","scrolltop":403.5,"scrollleft":0,"selection":{"start":{"row":15,"column":2},"end":{"row":15,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1497079307000}